# 智慧课堂运维系统 - 设计关键要点

## 项目概述

**项目名称**: 智慧课堂运维系统 (Smart Classroom Management System)  
**版本**: v0.9.0  
**类型**: 教师端一体化交付包  
**架构**: 前后端分离 + 容器化部署  

## 系统架构

### 整体架构
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Frontend      │    │    Backend      │    │    Database     │
│   (React+TS)    │◄──►│   (Node.js)     │◄──►│    (MySQL)      │
│   Port: 5173    │    │   Port: 3000    │    │   Port: 3306    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 技术栈

#### 前端技术栈
- **框架**: React 18.2.0 + TypeScript 5.4.0
- **构建工具**: Vite 5.0.0
- **UI组件库**: Ant Design 5.27.4
- **路由**: React Router DOM 6.30.1
- **图表**: Recharts 3.2.1
- **样式**: Tailwind CSS 4.1.14
- **HTTP客户端**: Axios 1.12.2
- **日期处理**: Day.js 1.11.18
- **图标**: Ant Design Icons + Lucide React

#### 后端技术栈
- **运行时**: Node.js 18
- **框架**: Express 4.19.2
- **数据库**: MySQL 8.0
- **数据库驱动**: mysql2 3.11.3
- **中间件**: CORS 2.8.5, Body-Parser 1.20.2

#### 容器化技术
- **容器**: Docker + Docker Compose
- **编排**: docker-compose.yml v3.9
- **健康检查**: MySQL健康检查机制
- **依赖管理**: 服务间依赖关系配置

## 核心功能模块

### 1. 用户管理系统
- **账号设计**: 统一账号体系，支持多角色切换
- **角色权限**: 教师、学生角色动态切换
- **身份验证**: 基于用户名密码的认证机制

### 2. 课程管理
- **课程创建**: 支持课程名称、班级、时间、地点设置
- **学生管理**: 批量导入学生名单功能
- **资源管理**: 课件、教学大纲、进度表上传与共享
- **座位管理**: 可视化座位排布设置

### 3. 作业系统
- **作业发布**: 支持标题、截止日期、状态管理
- **作业批阅**: 教师批阅与反馈功能
- **进度跟踪**: 作业完成情况统计

### 4. 消息通知
- **实时消息**: 作业提交、批阅结果通知
- **系统消息**: 账号绑定、解绑申请处理
- **消息状态**: 已读/未读状态管理

### 5. 数据分析
- **出勤统计**: 学生出勤情况分析
- **成绩分析**: 作业完成情况统计
- **行为分析**: 课堂参与度评估
- **报表生成**: 多维度数据报表

## 数据库设计

### 核心表结构

#### 用户表 (users)
```sql
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(64) UNIQUE,
    password VARCHAR(128),
    role VARCHAR(32)
);
```

#### 课程表 (courses)
```sql
CREATE TABLE courses (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255),
    teacher_user_id INT
);
```

#### 作业表 (assignments)
```sql
CREATE TABLE assignments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    course_id INT NULL,
    title VARCHAR(255) NOT NULL,
    content TEXT NULL,
    due DATE NULL,
    status VARCHAR(32) DEFAULT '进行中',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 消息表 (messages)
```sql
CREATE TABLE messages (
    id INT AUTO_INCREMENT PRIMARY KEY,
    text VARCHAR(255),
    read_flag TINYINT(1) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## 部署架构

### Docker容器化部署

#### 服务配置
- **数据库服务**: MySQL 8.0 容器
  - 容器名: `teacher-mysql`
  - 端口映射: `3306:3306`
  - 数据初始化: 自动执行 schema.sql 和 seed.sql

- **后端服务**: Node.js Express 应用
  - 容器名: `teacher-backend`
  - 端口映射: `3000:3000`
  - 环境变量: 数据库连接配置

- **前端服务**: React Vite 应用
  - 容器名: `teacher-frontend`
  - 端口映射: `5173:5173`
  - 环境变量: API基础URL配置

#### 服务依赖关系
```yaml
frontend → backend → database
```

### 环境变量配置

#### 数据库配置
```env
MYSQL_ROOT_PASSWORD=rootpass
MYSQL_DATABASE=smart_classroom
MYSQL_USER=smart_user
MYSQL_PASSWORD=smart_pass
```

#### 后端配置
```env
DB_HOST=db
DB_PORT=3306
DB_USER=smart_user
DB_PASS=smart_pass
DB_NAME=smart_classroom
PORT=3000
```

#### 前端配置
```env
VITE_API_BASE=http://backend:3000
```

## 关键设计要点

### 1. 账号系统设计
- **统一账号**: 不区分角色的账号体系
- **角色切换**: 登录时选择教师或学生角色
- **信息分离**: 账号与个人信息解耦，支持渐进式完善
- **简化注册**: 仅需用户名密码即可完成注册

### 2. 权限管理
- **动态权限**: 基于登录时选择的角色分配权限
- **功能隔离**: 不同角色访问不同的功能模块
- **数据隔离**: 基于用户角色的数据访问控制

### 3. 消息系统
- **集中管理**: 统一的消息中心处理所有通知
- **实时更新**: 支持实时消息推送
- **状态跟踪**: 消息读取状态管理
- **分类处理**: 不同类型消息的分类展示

### 4. 数据分析
- **多维分析**: 出勤、作业、参与度多维度分析
- **可视化展示**: 图表化数据展示
- **预警机制**: 学业困难学生预警
- **表扬机制**: 优秀学生表扬系统

### 5. 扩展性设计
- **模块化架构**: 功能模块独立，便于扩展
- **API设计**: RESTful API设计，支持前后端分离
- **容器化部署**: 支持水平扩展和负载均衡
- **配置化管理**: 环境变量配置，支持多环境部署

## 开发与部署

### 一键启动
```bash
docker-compose up -d
```

### 手动启动
```bash
# 启动后端
cd backend
npm install
npm start

# 启动前端
cd frontend
npm install
npm run dev
```

### 数据库初始化
- 自动执行 `db/init/schema.sql` 创建表结构
- 自动执行 `db/init/seed.sql` 插入初始数据

## 版本信息

- **当前版本**: v0.9.0
- **发布日期**: 2024年
- **维护状态**: 活跃开发中
- **技术支持**: 完整的Docker化部署方案

## 未来规划

### 短期目标
- 完善用户界面交互体验
- 增强数据分析功能
- 优化系统性能

### 长期目标
- 支持移动端应用
- 集成AI智能分析
- 多校区部署支持
- 第三方系统集成

---

*本文档描述了智慧课堂运维系统的核心设计理念和技术实现方案，为系统的开发、部署和维护提供指导。*
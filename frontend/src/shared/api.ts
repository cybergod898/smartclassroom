const BASE=import.meta.env.VITE_API_BASE||'http://localhost:3000';async function http(m,p,b){const r=await fetch(BASE+p,{method:m,headers:{'Content-Type':'application/json'},body:b?JSON.stringify(b):undefined});if(!r.ok)throw new Error(await r.text());const ct=r.headers.get('content-type')||'';return ct.includes('application/json')?r.json():r.text();}export const api={assignments:{list:()=>http('GET','/assignments'),create:(d)=>http('POST','/assignments',d)},messages:{list:()=>http('GET','/messages'),act:(id,d)=>http('POST','/messages/'+id+'/actions',d)}};